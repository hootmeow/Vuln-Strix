{{define "content"}}
<style>
    /* Print optimizations */
    @media print {
        body {
            background: white;
            font-size: 12pt;
        }

        .navbar,
        .btn-print,
        footer {
            display: none !important;
        }

        .card {
            border: 1px solid #ddd !important;
            box-shadow: none !important;
        }

        .badge {
            border: 1px solid #000;
            color: black !important;
            background: transparent !important;
        }
    }

    .delta-number {
        font-size: 2.5rem;
        font-weight: bold;
    }

    .trend-up {
        color: #dc3545;
    }

    .trend-down {
        color: #28a745;
    }
</style>

<div class="row mb-3 align-items-center">
    <div class="col-8">
        <h1 class="display-6">Executive Security Delta</h1>
        <p class="text-muted">Weekly Risk Snapshot: {{ .Date }}</p>
    </div>
    <div class="col-4 text-end">
        <button onclick="window.print()" class="btn btn-primary btn-print"><i class="bi bi-printer"></i> Save as
            PDF</button>
    </div>
</div>

<hr>

<div class="row text-center mb-5">
    <div class="col-md-4">
        <div class="card p-4 border-0 bg-light">
            <h5 class="text-muted text-uppercase small">New High/Critical Risks</h5>
            <div class="delta-number text-danger">+{{ .NewRisk }}</div>
            <small class="text-muted">Since last week</small>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card p-4 border-0 bg-light">
            <h5 class="text-muted text-uppercase small">Remediated Risks</h5>
            <div class="delta-number text-success">-{{ .FixedRisk }}</div>
            <small class="text-muted">Confirmed fixes</small>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card p-4 border-full">
            <h5 class="text-muted text-uppercase small">Net Risk Change</h5>
            <!-- Simple calculation rendering -->
            {{ $net := sub .NewRisk .FixedRisk }}
            <div class="delta-number {{ if gt $net 0 }}text-danger{{else}}text-success{{end}}">
                {{ if gt $net 0 }}+{{end}}{{ $net }}
            </div>
            <small class="text-muted">Total Exposure Impact</small>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-6">
        <h4><i class="bi bi-exclamation-triangle text-danger"></i> New Critical Discovered</h4>
        <p class="mb-3">These items require immediate remediation plan.</p>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Asset</th>
                    <th>Vulnerability</th>
                </tr>
            </thead>
            <tbody>
                <!-- Placeholder for demo as logic needs complex query -->
                <tr>
                    <td>db-prod-01</td>
                    <td>Apache Log4j RCE</td>
                </tr>
                <tr>
                    <td>web-dmz-04</td>
                    <td>SSL Certificate Expired</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="col-md-6">
        <h4><i class="bi bi-check-circle text-success"></i> Top Remediations</h4>
        <p class="mb-3">Significant risk reductions achieved this period.</p>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Asset</th>
                    <th>Vulnerability</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>all-workstations</td>
                    <td>Chrome Zero-Day Patch</td>
                </tr>
                <tr>
                    <td>vpn-gateway</td>
                    <td>Cisco IOS Update</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="row mt-5">
    <div class="col-12 text-center text-muted small">
        <p>End of Report | Generated by Vuln-Strix Intelligence Platform</p>
    </div>
</div>
{{end}}